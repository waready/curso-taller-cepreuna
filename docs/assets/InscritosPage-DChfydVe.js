import{_ as A,C as L,N as M,E as y,L as R,H as i,F as t,r as h,z as U,I as f,J as v,D as k,M as _,Q as V}from"./index-D3Pq5OX6.js";import{Q as q}from"./QInput-fHitKPBD.js";import{Q as B,a as b,b as g}from"./QTable-DO9M8djl.js";import{Q as D}from"./QTooltip-DDpV-Mlb.js";import{a as N,Q as E}from"./QCard-BMyNaZeq.js";import{u as x}from"./use-quasar-DR9W6PfO.js";import{a as F}from"./index-DW_MHI2K.js";import"./use-dark-DnCt0c9h.js";import"./format-D-5Nijaa.js";import"./scroll-DkVlh74h.js";import"./QItem-BSl-90NW.js";import"./position-engine-BKtUuHXT.js";import"./selection-DA9uc4-U.js";import"./use-timeout-Dng2fuTh.js";function $(o){setTimeout(()=>{window.URL.revokeObjectURL(o.href)},1e4),o.remove()}function j(o,n,r={}){const{mimeType:d,byteOrderMark:p,encoding:u}=typeof r=="string"?{mimeType:r}:r,e=u!==void 0?new TextEncoder(u).encode([n]):n,l=p!==void 0?[p,e]:[e],w=new Blob(l,{type:d||"application/octet-stream"}),s=document.createElement("a");s.href=window.URL.createObjectURL(w),s.setAttribute("download",o),typeof s.download>"u"&&s.setAttribute("target","_blank"),s.classList.add("hidden"),s.style.position="fixed",document.body.appendChild(s);try{return s.click(),$(s),!0}catch(C){return $(s),C}}function T(o,n){let r=n!==void 0?n(o):o;return r=r==null?"":String(r),r=r.split('"').join('""'),`"${r}"`}const I=L({name:"TableVisits",setup(){const o=x(),n=h(""),r=h([]),d={1:"Razonamiento Matemático",2:"Razonamiento Verbal",3:"Física, Química y Biología",4:"Geografía e Historia"},p={1:"Unap",2:"Particular"},u=a=>({1:"blue",2:"green",3:"red",4:"orange"})[a]||"grey",e=[{name:"id",align:"left",label:"ID",field:"id",sortable:!0},{name:"nombre_completo",align:"left",label:"Nombres",field:a=>`${a.nombres} ${a.paterno} ${a.materno}`,sortable:!0},{name:"nro_documento",align:"nro_documento",label:"Nro Documento",field:"nro_documento"},{name:"area",align:"left",label:"Área",field:a=>d[a.area]||"Desconocida",sortable:!0},{name:"celular",align:"left",label:"Celular",field:"celular"},{name:"condicion",align:"left",label:"Condicion",field:"condicion",sortable:!0},{name:"asistencia",align:"left",label:"Asistencia",field:"asistencia"},{name:"path",align:"left",label:"Ficha",field:"path"}],l=h({rowsPerPage:10}),w=async()=>{try{const a=await F.get("https://sistemas.cepreuna.edu.pe/api/curso-taller/inscripciones",{headers:{Authorization:"cepreuna_v1_api"}});r.value=a.data.listado}catch(a){console.error("Error al obtener los datos:",a)}},s=()=>{const a=[e.map(c=>T(c.label))].concat(r.value.map(c=>e.map(m=>T(typeof m.field=="function"?m.field(c):c[m.field||m.name],m.format)).join(","))).join(`\r
`);j("table-export.csv",a,"text/csv")!==!0&&o.notify({message:"El navegador bloqueó la descarga...",color:"negative",icon:"warning"})};return U(()=>{w()}),{filter:n,columns:e,rows:r,pagination:l,exportTable:s,areaMap:d,openFile:a=>{if(!a){this.$q.notify({message:"No hay archivo disponible",color:"negative",icon:"warning"});return}const c=a.startsWith("http")?a:`https://sistemas.cepreuna.edu.pe/${a}`;window.open(c,"_blank")},CondicioMap:p,getAreaColor:u}}}),z={class:"row q-col-gutter-sm"},P={class:"col-lg-12 col-md-12 col-sm-12 col-xs-12"};function S(o,n,r,d,p,u){return y(),M("div",z,[R("div",P,[i(N,{class:"text-grey-8 no-shadow",bordered:""},{default:t(()=>[i(E,{class:"q-pa-none"},{default:t(()=>[i(B,{class:"no-shadow",rows:o.rows,title:"Lista de Registros",columns:o.columns,"row-key":"id",filter:o.filter,pagination:o.pagination,"onUpdate:pagination":n[1]||(n[1]=e=>o.pagination=e)},{"top-right":t(e=>[i(q,{dense:"",debounce:"300",modelValue:o.filter,"onUpdate:modelValue":n[0]||(n[0]=l=>o.filter=l),placeholder:"Buscar"},{append:t(()=>[i(V,{name:"search"})]),_:1},8,["modelValue"]),i(_,{color:"primary","icon-right":"archive",label:"Exportar","no-caps":"",onClick:o.exportTable},null,8,["onClick"])]),"body-cell-area":t(e=>[i(b,{props:e},{default:t(()=>[i(g,{color:o.getAreaColor(e.row.area),class:"q-pa-xs"},{default:t(()=>[f(v(o.areaMap[e.row.area]||"Desconocida"),1)]),_:2},1032,["color"])]),_:2},1032,["props"])]),"body-cell-condicion":t(e=>[i(b,{props:e},{default:t(()=>[i(g,{color:o.getAreaColor(e.row.condicion),class:"q-pa-xs"},{default:t(()=>[f(v(o.CondicioMap[e.row.condicion]||"Desconocida"),1)]),_:2},1032,["color"])]),_:2},1032,["props"])]),"body-cell-path":t(e=>[i(b,{props:e},{default:t(()=>[e.row.path?(y(),k(_,{key:0,flat:"",round:"",dense:"",color:"info",icon:"file_open",class:"q-ml-sm",onClick:l=>o.openFile(e.row.path)},{default:t(()=>[i(D,null,{default:t(()=>n[2]||(n[2]=[f("Ver Archivo")])),_:1})]),_:2},1032,["onClick"])):(y(),k(g,{key:1,color:"negative"},{default:t(()=>n[3]||(n[3]=[f("Sin archivo")])),_:1}))]),_:2},1032,["props"])]),"body-cell-asistencia":t(e=>[i(b,{props:e},{default:t(()=>[i(g,{color:e.row.asistencia===1?"green":"red",class:"q-pa-xs"},{default:t(()=>[f(v(e.row.asistencia===1?"Asistió":"No Asistió"),1)]),_:2},1032,["color"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","filter","pagination"])]),_:1})]),_:1})])])}const re=A(I,[["render",S]]);export{re as default};
