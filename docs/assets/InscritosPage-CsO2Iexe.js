import{d as q,Q as A}from"./QBtn-D-afTUYf.js";import{Q as L,a as b,b as g,c as M}from"./QTable-BDqTzKna.js";import{Q as R}from"./QTooltip-DNFyvCwP.js";import{a as T,Q as U}from"./QCard-CmeEUJqC.js";import{f as V,$ as B,_ as D,F as N,P as j,H as y,O as F,K as i,I as t,r as h,o as x,L as m,M as v,G as Q}from"./index-DXe5sY2n.js";import{a as E}from"./index-DW_MHI2K.js";import"./use-dark-Cj7eRfa2.js";import"./format-DqDzzp0o.js";import"./selection-C8a7QGYT.js";import"./QItem-B2xemzBQ.js";function $(o){setTimeout(()=>{window.URL.revokeObjectURL(o.href)},1e4),o.remove()}function I(o,n,r={}){const{mimeType:d,byteOrderMark:p,encoding:u}=typeof r=="string"?{mimeType:r}:r,e=u!==void 0?new TextEncoder(u).encode([n]):n,l=p!==void 0?[p,e]:[e],w=new Blob(l,{type:d||"application/octet-stream"}),s=document.createElement("a");s.href=window.URL.createObjectURL(w),s.setAttribute("download",o),typeof s.download>"u"&&s.setAttribute("target","_blank"),s.classList.add("hidden"),s.style.position="fixed",document.body.appendChild(s);try{return s.click(),$(s),!0}catch(_){return $(s),_}}function P(){return V(B)}function k(o,n){let r=n!==void 0?n(o):o;return r=r==null?"":String(r),r=r.split('"').join('""'),`"${r}"`}const O=N({name:"TableVisits",setup(){const o=P(),n=h(""),r=h([]),d={1:"Razonamiento Matemático",2:"Razonamiento Verbal",3:"Física, Química y Biología",4:"Geografía e Historia"},p={1:"Unap",2:"Particular"},u=a=>({1:"blue",2:"green",3:"red",4:"orange"})[a]||"grey",e=[{name:"id",align:"left",label:"ID",field:"id",sortable:!0},{name:"nombre_completo",align:"left",label:"Nombres",field:a=>`${a.nombres} ${a.paterno} ${a.materno}`,sortable:!0},{name:"nro_documento",align:"nro_documento",label:"Nro Documento",field:"nro_documento"},{name:"area",align:"left",label:"Área",field:a=>d[a.area]||"Desconocida",sortable:!0},{name:"celular",align:"left",label:"Celular",field:"celular"},{name:"condicion",align:"left",label:"Condicion",field:"condicion",sortable:!0},{name:"asistencia",align:"left",label:"Asistencia",field:"asistencia"},{name:"path",align:"left",label:"Ficha",field:"path"}],l=h({rowsPerPage:10}),w=async()=>{try{const a=await E.get("https://sistemas.cepreuna.edu.pe/api/curso-taller/inscripciones",{headers:{Authorization:"cepreuna_v1_api"}});r.value=a.data.listado}catch(a){console.error("Error al obtener los datos:",a)}},s=()=>{const a=[e.map(c=>k(c.label))].concat(r.value.map(c=>e.map(f=>k(typeof f.field=="function"?f.field(c):c[f.field||f.name],f.format)).join(","))).join(`\r
`);I("table-export.csv",a,"text/csv")!==!0&&o.notify({message:"El navegador bloqueó la descarga...",color:"negative",icon:"warning"})};return x(()=>{w()}),{filter:n,columns:e,rows:r,pagination:l,exportTable:s,areaMap:d,openFile:a=>{if(!a){this.$q.notify({message:"No hay archivo disponible",color:"negative",icon:"warning"});return}const c=a.startsWith("http")?a:`https://sistemas.cepreuna.edu.pe/${a}`;window.open(c,"_blank")},CondicioMap:p,getAreaColor:u}}}),S={class:"row q-col-gutter-sm"},z={class:"col-lg-12 col-md-12 col-sm-12 col-xs-12"};function G(o,n,r,d,p,u){return y(),j("div",S,[F("div",z,[i(T,{class:"text-grey-8 no-shadow",bordered:""},{default:t(()=>[i(U,{class:"q-pa-none"},{default:t(()=>[i(L,{class:"no-shadow",rows:o.rows,title:"Lista de Registros",columns:o.columns,"row-key":"id",filter:o.filter,pagination:o.pagination,"onUpdate:pagination":n[1]||(n[1]=e=>o.pagination=e)},{"top-right":t(e=>[i(M,{dense:"",debounce:"300",modelValue:o.filter,"onUpdate:modelValue":n[0]||(n[0]=l=>o.filter=l),placeholder:"Buscar"},{append:t(()=>[i(A,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-area":t(e=>[i(b,{props:e},{default:t(()=>[i(g,{color:o.getAreaColor(e.row.area),class:"q-pa-xs"},{default:t(()=>[m(v(o.areaMap[e.row.area]||"Desconocida"),1)]),_:2},1032,["color"])]),_:2},1032,["props"])]),"body-cell-condicion":t(e=>[i(b,{props:e},{default:t(()=>[i(g,{color:o.getAreaColor(e.row.condicion),class:"q-pa-xs"},{default:t(()=>[m(v(o.CondicioMap[e.row.condicion]||"Desconocida"),1)]),_:2},1032,["color"])]),_:2},1032,["props"])]),"body-cell-path":t(e=>[i(b,{props:e},{default:t(()=>[e.row.path?(y(),Q(q,{key:0,flat:"",round:"",dense:"",color:"info",icon:"file_open",class:"q-ml-sm",onClick:l=>o.openFile(e.row.path)},{default:t(()=>[i(R,null,{default:t(()=>n[2]||(n[2]=[m("Ver Archivo")])),_:1})]),_:2},1032,["onClick"])):(y(),Q(g,{key:1,color:"negative"},{default:t(()=>n[3]||(n[3]=[m("Sin archivo")])),_:1}))]),_:2},1032,["props"])]),"body-cell-asistencia":t(e=>[i(b,{props:e},{default:t(()=>[i(g,{color:e.row.asistencia===1?"green":"red",class:"q-pa-xs"},{default:t(()=>[m(v(e.row.asistencia===1?"Asistió":"No Asistió"),1)]),_:2},1032,["color"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","filter","pagination"])]),_:1})]),_:1})])])}const te=D(O,[["render",G]]);export{te as default};
