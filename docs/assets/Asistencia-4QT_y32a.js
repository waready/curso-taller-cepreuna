import{c as g,aC as f,aD as v,a as h,h as b,b as C,_,C as Q,D as w,E as A,F as n,r as u,z as y,y as p,w as k,H as t,aE as x,L as m,aF as I,M as $}from"./index-C9P37lrE.js";import{a as q,Q as d}from"./QCard-CEUsVJtp.js";import{Q as B}from"./QInput-BsAojM1a.js";import{Q as D}from"./QPage-CohLEn6G.js";import{a as N,b as V}from"./QLayout-BFhYEfRa.js";import{a as z}from"./index-DW_MHI2K.js";import{u as E}from"./use-quasar-ChNWhtrU.js";import"./use-dark-BVNqGgdl.js";import"./scroll-BQ8fV502.js";const K=g({name:"QCardActions",props:{...f,vertical:Boolean},setup(a,{slots:s}){const i=v(a),o=h(()=>`q-card__actions ${i.value} q-card__actions--${a.vertical===!0?"vert column":"horiz row"}`);return()=>b("div",{class:o.value},C(s.default))}}),L=Q({name:"LockScreen",setup(){const a=u(""),s=u(null),i=u(!1),o=E();y(()=>{p(()=>{s.value?.focus()})});const r=(e,c="negative")=>{o.notify({position:"top-right",message:e,color:c,icon:c==="positive"?"check_circle":c==="warning"?"warning":"report_problem",timeout:5e3,actions:[{label:"Cerrar",color:"white"}]})};k(a,e=>{e.length===8&&l()});const l=async()=>{if(a.value.length!==8){r("El DNI debe tener 8 dígitos.","negative");return}i.value=!0;try{const e=await z.post("https://sistemas.cepreuna.edu.pe/api/curso-taller/asistencia",{dni:a.value},{headers:{Authorization:"cepreuna_v1_api"}});e.data.message.includes("ya registró su asistencia")?r(e.data.message,"warning"):e.data.message.includes("Asistencia registrada correctamente")?r(e.data.message,"positive"):r(e.data.message,"negative")}catch(e){r(e.response?.data?.message||"Error al registrar asistencia.","negative")}finally{i.value=!1,a.value="",p(()=>s.value?.focus())}};return{dni:a,dniInput:s,loading:i,registrarAsistencia:l}}});function P(a,s,i,o,r,l){return A(),w(N,{class:"background-gradient"},{default:n(()=>[t(V,null,{default:n(()=>[t(D,{class:"flex flex-center"},{default:n(()=>[t(q,{class:"login-form"},{default:n(()=>[t(d,{class:"avatar-section"},{default:n(()=>[t(x,{size:"80px",class:"shadow-10"},{default:n(()=>s[1]||(s[1]=[m("img",{src:"https://next-quasar-admin.netlify.app/profile.svg"},null,-1)])),_:1})]),_:1}),t(d,{class:"q-mt-md text-center"},{default:n(()=>s[2]||(s[2]=[m("div",{class:"text-h5 text-bold text-white"}," Control de Asistencia Día 1 - Turno Tarde ",-1)])),_:1}),t(d,{class:"input-section"},{default:n(()=>[t(B,{modelValue:a.dni,"onUpdate:modelValue":s[0]||(s[0]=e=>a.dni=e),type:"number",ref:"dniInput",dense:"",class:"custom-input",placeholder:"Ingrese su DNI",disable:a.loading,onKeyup:I(a.registrarAsistencia,["enter"])},null,8,["modelValue","disable","onKeyup"])]),_:1}),t(K,{align:"center"},{default:n(()=>[t($,{push:"",label:"Registrar Asistencia",class:"btn-unlock",color:"primary",loading:a.loading,disable:a.dni.length!==8,onClick:a.registrarAsistencia},null,8,["loading","disable","onClick"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}const J=_(L,[["render",P],["__scopeId","data-v-4b378253"]]);export{J as default};
